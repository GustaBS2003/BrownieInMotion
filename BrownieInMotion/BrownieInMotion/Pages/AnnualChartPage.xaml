<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"  
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"  
    x:Class="BrownieInMotion.Pages.AnnualChartPage"  
    Title="Simulação Anual Browniana">
    <ScrollView>
        <Grid Padding="24" RowDefinitions="Auto" ColumnDefinitions="*,Auto" ColumnSpacing="24">
            <Border
                Grid.Column="0"
                Stroke="MediumPurple"
                BackgroundColor="LightSlateGray"
                StrokeShape="RoundRectangle"
                StrokeThickness="1"
                HorizontalOptions="Fill"
                VerticalOptions="Fill"
                Margin="0,0,0,12">
                <Border.Shadow>
                    <Shadow Brush="MediumPurple" Offset="4,4" Radius="8" Opacity="0.4"/>
                </Border.Shadow>
                <Grid>
                    <GraphicsView x:Name="AnnualBrownianChart"
                        HorizontalOptions="Fill"
                        VerticalOptions="Fill">
                        <GraphicsView.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnChartTapped"/>
                        </GraphicsView.GestureRecognizers>
                    </GraphicsView>
                    <Label x:Name="TooltipLabel"
                        IsVisible="False"
                        BackgroundColor="#FFF"
                        TextColor="Black"
                        Padding="6,2"
                        FontSize="14"
                        VerticalOptions="Start"
                        HorizontalOptions="Start"
                        TranslationX="0"
                        TranslationY="0">
                    </Label>
                </Grid>
            </Border>

            <Border Grid.Column="1"
                   Padding="18"
                   Stroke="MediumPurple"
                   BackgroundColor="LightSlateGray"
                   StrokeShape="RoundRectangle"
                   StrokeThickness="1"
                   VerticalOptions="Start"
                   WidthRequest="240">
                <Border.Shadow>
                    <Shadow Brush="MediumPurple" Offset="4,4" Radius="8" Opacity="0.4"/>
                </Border.Shadow>
                <VerticalStackLayout Spacing="16">
                    <Label Text="Preço Inicial:" FontAttributes="Bold"/>
                    <Entry Text="{Binding InitialPrice}" Keyboard="Numeric" />

                    <Label Text="Volatilidade anual (ex: 0.2 para 20%):" FontAttributes="Bold"/>
                    <Slider Minimum="0.01" Maximum="1" Value="{Binding Volatility, Mode=TwoWay}" ThumbColor="MediumPurple" MinimumTrackColor="MediumPurple" />
                    <Label Text="{Binding Volatility, StringFormat='Volatilidade: {0:F2}'}" FontSize="12" TextColor="GhostWhite" />

                    <Label Text="Retorno médio anual (ex: 0.01 para 1%):" FontAttributes="Bold"/>
                    <Entry Text="{Binding Mean}" Keyboard="Numeric" />

                    <Label Text="Anos:" FontAttributes="Bold"/>
                    <Entry Text="{Binding Years}" Keyboard="Numeric" />

                    <Label Text="Passos por ano:" FontAttributes="Bold"/>
                    <Entry Text="{Binding StepsPerYear}" Keyboard="Numeric" />

                    <Label Text="Número de Simulações:" FontAttributes="Bold"/>
                    <Stepper Minimum="1" Maximum="100" Increment="1" Value="{Binding NumSimulations, Mode=TwoWay}" />
                    <Label Text="{Binding NumSimulations, StringFormat='Simulações: {0}'}" FontSize="12" TextColor="GhostWhite" />

                    <Button Text="Simular" Command="{Binding SimulateCommand}" 
                            BackgroundColor="MediumPurple" 
                            TextColor="White"
                            CornerRadius="8"
                            FontAttributes="Bold"
                            HeightRequest="44"/>
                </VerticalStackLayout>
            </Border>
        </Grid>
    </ScrollView>
</ContentPage>